---
import { LANGS } from "src/site-config";
import { asyncFlatMap } from "src/lib/util";
import { getTags } from "src/lib/posts";

const { lang, tag } = Astro.params;
export async function getStaticPaths() {
  return await asyncFlatMap(LANGS, async (lang) => {
    const tags = await getTags(lang);
    const paths = tags.map((tag) => ({
      params: { lang, tag: tag[0] },
    }));
    return paths;
  });
}
// return Astro.redirect(`/${lang}/tags/${encodeURIComponent(tag)}/page/1`);
---

<head>
  <meta
    http-equiv="refresh"
    content={`0; URL=/${lang}/tags/${encodeURIComponent(tag)}/page/1`}
  />
</head>
